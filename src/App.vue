<template>
  <div class="page">
    <!-- âœ… [ë°°ê²½-1] í˜ëŸ¬ê°€ëŠ” ë°©ëª…ë¡ ë©”ì‹œì§€ -->
    <div class="floating-layer" aria-hidden="true">
      <span
          v-for="(msg, i) in messages"
          :key="'bg-' + i"
          class="floating"
          :style="{ top: getLane(i) + '%', animationDelay: (i * 2) + 's' }"
      >
        {{ msg }}
      </span>
    </div>

    <!-- âœ… [ë°°ê²½-2] ë³´ë¦„ë‹¬ -->
    <div class="moon-layer" aria-hidden="true">
      <div class="moon"></div>
    </div>

    <!-- âœ… [í—¤ë”-1] ë©”ì¸ ì¹´í”¼ -->
    <header class="hero">
      <h1>í•œê°€ìœ„, í’ìš”ì™€ ë‚˜ëˆ”ì˜ ë‚ </h1>
      <p class="subtitle">ë‹¬ë¹›ì´ ê°€ì¥ ë‘¥ê·¼ ë‚ , ë§ˆìŒê¹Œì§€ ë‘¥ê¸€ê²Œ</p>
    </header>

    <main>
      <!-- âœ… [ì„¹ì…˜-1] ì¶”ì„ì´ ë¬´ì—‡ì¸ì§€ ê°„ë‹¨ ì„¤ëª… -->
      <section>
        <h2>ì¶”ì„ì´ë€ ë¬´ì—‡ì¼ê¹Œ?</h2>
        <p>
          ì¶”ì„ì€ ìŒë ¥ 8ì›” 15ì¼, í•œ í•´ì˜ ìˆ˜í™•ì— ê°ì‚¬í•˜ê³  ì¡°ìƒì—ê²Œ ì˜ˆë¥¼ ì˜¬ë¦¬ëŠ” ìš°ë¦¬ë‚˜ë¼ì˜ ëŒ€í‘œ ëª…ì ˆì…ë‹ˆë‹¤.
          ê°€ì¡±ì´ ëª¨ì—¬ ì•ˆë¶€ë¥¼ ë‚˜ëˆ„ê³ , ì†¡í¸ì„ ë¹šìœ¼ë©°, ì„œë¡œì˜ ë§ˆìŒì„ ë‚˜ëˆ„ëŠ” ë”°ëœ»í•œ ë‚ ì´ì§€ìš”.
        </p>
      </section>

      <!-- âœ… [ì„¹ì…˜-2] ì¶”ì„ì˜ ìœ ë˜ì™€ í˜„ì¬ê¹Œì§€ì˜ íë¦„ -->
      <section>
        <h2>ì¶”ì„ì˜ ìœ ë˜</h2>
        <p>
          ì¶”ì„ì˜ ê¸°ì›ì€ ì‹ ë¼ ì‹œëŒ€ì˜ â€˜ê°€ë°°(å˜‰ä¿³)â€™ í’ìŠµì—ì„œ ë¹„ë¡¯ë˜ì—ˆë‹¤ê³  ì „í•´ì§‘ë‹ˆë‹¤.
          ë‘ í¸ìœ¼ë¡œ ë‚˜ë‰˜ì–´ í•œ ë‹¬ ë™ì•ˆ ê¸¸ìŒˆì„ ê²¨ë£¨ê³ , ìŠ¹íŒ¨ì— ë”°ë¼ ì”ì¹˜ë¥¼ ë² í’€ë˜ í’ìŠµì´
          ë†ê²½ ì‚¬íšŒì˜ ìˆ˜í™• ì‹œê¸°ì™€ ê²°í•©ë˜ì–´ ì˜¤ëŠ˜ë‚ ì˜ ì¶”ì„ìœ¼ë¡œ ë°œì „í–ˆìŠµë‹ˆë‹¤.
        </p>
        <p>
          í˜„ëŒ€ì— ì™€ì„œëŠ” ì°¨ë¡€ì™€ ì„±ë¬˜, ê°€ì¡± ëª¨ì„, ì „í†µ ìŒì‹ê³¼ ë†€ì´ë¥¼ í†µí•´
          â€˜ê°ì‚¬â€™ì™€ â€˜ë‚˜ëˆ”â€™ì˜ ì˜ë¯¸ë¥¼ ê¸°ë¦¬ë©° ì´ì–´ì§€ê³  ìˆìŠµë‹ˆë‹¤.
        </p>
      </section>

      <!-- âœ… [ì„¹ì…˜-3] ì „í†µ ìŒì‹ ì†Œê°œ (ìœ¡ì „, ì†¡í¸ ë“±) -->
      <section>
        <h2>ì¶”ì„ì˜ ì „í†µ ìŒì‹</h2>
        <ul>
          <li>
            <strong>ì†¡í¸</strong> â€” í–‡ê³¡ìœ¼ë¡œ ë¹šì€ ë°˜ë‹¬ ëª¨ì–‘ì˜ ë–¡ìœ¼ë¡œ, ê°€ì¡±ì˜ ì†Œì›ì„ ë‹´ì•„ í•¨ê»˜ ë¹šê³  ë‚˜ëˆ  ë¨¹ìŠµë‹ˆë‹¤.
          </li>
          <li>
            <strong>ìœ¡ì „</strong> â€” ì–‡ê²Œ ì €ë¯¼ ê³ ê¸°ì— ë‹¬ê±€ì˜·ì„ ì…í˜€ ë¶€ì¹œ ëª…ì ˆ ë³„ë¯¸ë¡œ, ë‹´ë°±í•œ ë§›ê³¼ í’ì„±í•œ ì‹ê°ì´ íŠ¹ì§•ì…ë‹ˆë‹¤.
          </li>
          <li>
            <strong>ì¡ì±„</strong> â€” ì—¬ëŸ¬ ì±„ì†Œì™€ ë‹¹ë©´ì„ ì–´ìš°ëŸ¬ì§€ê²Œ ë³¶ì•„ë‚¸ ìŒì‹ìœ¼ë¡œ, ì¡°í™”ì™€ í’ìš”ë¥¼ ìƒì§•í•©ë‹ˆë‹¤.
          </li>
        </ul>
      </section>

      <!-- âœ… [ì„¹ì…˜-4] ì „í†µ ë†€ì´ ì†Œê°œ (ì¥ë¶ˆë†€ì´, ì œê¸°ì°¨ê¸° ë“±) -->
      <section>
        <h2>ì¶”ì„ì˜ ì „í†µ ë†€ì´</h2>
        <ul>
          <li>
            <strong>ì¥ë¶ˆë†€ì´</strong> â€” ë“¤íŒì˜ í•´ì¶©ì„ ì—†ì• ê³  í’ë…„ì„ ê¸°ì›í•˜ë©°, ë¶ˆë¶™ì¸ ê¹¡í†µì„ ì›ì„ ê·¸ë¦¬ë©° ëŒë¦¬ë˜ ë†€ì´ì…ë‹ˆë‹¤.
          </li>
          <li>
            <strong>ì œê¸°ì°¨ê¸°</strong> â€” ì œê¸°ë¥¼ ë°œë¡œ ì°¨ì„œ ì˜¤ë˜ ë„ìš°ëŠ” ë†€ì´ë¡œ, ë‚¨ë…€ë…¸ì†Œ í•¨ê»˜ ì¦ê¸¸ ìˆ˜ ìˆëŠ” ëª…ì ˆ ë†€ì´ì…ë‹ˆë‹¤.
          </li>
        </ul>
      </section>

      <!-- âœ… [ì„¹ì…˜-5] ë°©ëª…ë¡: ê¸€ ë‚¨ê¸°ê¸° + ë°°ê²½ì—ì„œ í˜ëŸ¬ê°€ê²Œ -->
      <section class="guestbook">
        <h2>í•œê°€ìœ„ ë°©ëª…ë¡</h2>
        <form @submit.prevent="addMessage" class="form">
          <input
              v-model="newMessage"
              type="text"
              placeholder="ì¶”ì„ ì¸ì‚¬ë¥¼ ë‚¨ê²¨ì£¼ì„¸ìš”!"
              required
              aria-label="ë°©ëª…ë¡ ì…ë ¥"
          />
          <button type="submit">ë‚¨ê¸°ê¸°</button>
        </form>

        <ul class="list">
          <li v-for="(msg, i) in messages" :key="'list-' + i">{{ msg }}</li>
        </ul>
      </section>
    </main>

    <footer class="footer">
      <p>Â© 2025 í•œê°€ìœ„ì˜ ë§ˆìŒ | í’ìš”ë¡œìš´ ì¶”ì„ ë˜ì„¸ìš” ğŸŒ•</p>
    </footer>
  </div>
</template>

<script lang="ts" setup>
/**
 * âœ… ì²´í¬ë¦¬ìŠ¤íŠ¸
 * [x] ë©”ì¸ ì¹´í”¼
 * [x] ì„¹ì…˜ ì œëª©
 * [x] ì „í†µ ìŒì‹(ìœ¡ì „, ì†¡í¸ ë“±) ì†Œê°œ
 * [x] ì „í†µ ë†€ì´(ì¥ë¶ˆë†€ì´, ì œê¸°ì°¨ê¸° ë“±) ì†Œê°œ
 * [x] ì¶”ì„ì´ ë¬´ì—‡ì¸ì§€ ê°„ë‹¨ ì„¤ëª…
 * [x] ì¶”ì„ì˜ ìœ ë˜/í˜„ì¬ê¹Œì§€ì˜ íë¦„
 * [x] ë°©ë¬¸ì ë°©ëª…ë¡ ì…ë ¥
 * [x] ë°©ëª…ë¡ ê¸€ ë°°ê²½ íë¦„ ì• ë‹ˆë©”ì´ì…˜
 * [x] ë³´ë¦„ë‹¬ ë°°ê²½ (ì—£ì§€/ì„¸ë ¨)
 * [x] TS íƒ€ì… ì•ˆì „ (number | undefined ì œê±°)
 */
import { ref } from 'vue'

const messages = ref<string[]>([
  'ë³´ë¦„ë‹¬ì²˜ëŸ¼ í™˜í•œ í•œê°€ìœ„ ë˜ì„¸ìš” ğŸŒ•',
  'ê°€ì¡±ê³¼ í•¨ê»˜ ë”°ëœ»í•œ ì‹œê°„ ë³´ë‚´ì„¸ìš” ğŸ‘',
  'í’ì„±í•œ ìˆ˜í™•ì²˜ëŸ¼ í–‰ë³µì´ ê°€ë“í•˜ê¸¸ ğŸ‚',
])

const newMessage = ref<string>('')

function addMessage(): void {
  const text = newMessage.value.trim()
  if (!text) return
  messages.value.push(text)
  newMessage.value = ''
}

/** ===== ë°°ê²½ í…ìŠ¤íŠ¸ ë ˆì¸ ê³„ì‚°(ì¸ë±ìŠ¤ ê¸°ë°˜: í•­ìƒ number ë°˜í™˜) ===== */
const LANE_MIN = 10
const LANE_MAX = 80
const LANE_COUNT = 6

const clamp = (v: number, lo: number, hi: number): number => Math.min(hi, Math.max(lo, v))

/** ê°„ë‹¨í•œ ì‹œë“œ ê¸°ë°˜ ë‚œìˆ˜(ê²°ì •ë¡ ì  ì§€í„°) */
function jitter(i: number): number {
  // 0 ~ 1 ì‚¬ì´
  const x = (Math.sin(i * 12.9898 + 78.233) * 43758.5453) % 1
  const frac = x - Math.floor(x)
  return (frac * 6) - 3 // -3 ~ +3
}

/** ië²ˆì§¸ ë©”ì‹œì§€ì˜ Y% ìœ„ì¹˜ë¥¼ ê³„ì‚° (ë°°ì—´ ì ‘ê·¼ ì—†ì´ í•­ìƒ number) */
function getLane(i: number): number {
  const gap = (LANE_MAX - LANE_MIN) / Math.max(1, LANE_COUNT - 1)
  const laneIndex = i % LANE_COUNT
  const base = LANE_MIN + laneIndex * gap
  return clamp(base + jitter(i), LANE_MIN, LANE_MAX)
}
</script>

<style scoped>
/* ===== í˜ì´ì§€ ë² ì´ìŠ¤ ===== */
.page {
  min-height: 100vh;
  color: #f7f7f7;
  background:
      radial-gradient(circle at 60% -10%, rgba(255,255,255,0.08), transparent 40%),
      radial-gradient(circle at 10% 20%, rgba(255,255,255,0.06), transparent 35%),
      linear-gradient(180deg, #190f2a 0%, #0f0b1a 60%, #0a0712 100%);
  font-family: "Pretendard", system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
  overflow-x: hidden;
  position: relative;
  padding-bottom: 72px;
}

/* ===== ë°°ê²½: í˜ëŸ¬ê°€ëŠ” í…ìŠ¤íŠ¸ ===== */
.floating-layer {
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: 1;
  opacity: 0.92;
}
.floating {
  position: absolute;
  left: 100%;
  white-space: nowrap;
  font-size: 0.95rem;
  color: rgba(255, 240, 200, 0.86);
  text-shadow: 0 0 8px rgba(0,0,0,0.6);
  animation: float-left 24s linear infinite;
}
@keyframes float-left {
  0%   { transform: translateX(100%);   opacity: 0.9; }
  10%  { opacity: 1; }
  90%  { opacity: 1; }
  100% { transform: translateX(-130%); opacity: 0.9; }
}

/* ===== ë°°ê²½: ë³´ë¦„ë‹¬ ===== */
.moon-layer {
  position: fixed;
  inset: 0 0 auto 0;
  display: flex;
  justify-content: center;
  margin-top: 24px;
  z-index: 2;
  pointer-events: none;
}
.moon {
  width: 240px;
  height: 240px;
  border-radius: 50%;
  background:
      radial-gradient(circle at 45% 40%, #fffbe9 0%, #fff3b8 55%, #edd787 80%, #d9c06e 100%);
  box-shadow:
      0 0 32px 8px rgba(255, 245, 200, 0.3),
      0 0 120px 40px rgba(255, 245, 200, 0.08);
  animation: moon-pulse 7s ease-in-out infinite;
}
@keyframes moon-pulse {
  0%, 100% { transform: scale(1);   opacity: 0.96; }
  50%      { transform: scale(1.04); opacity: 1; }
}

/* ===== í—¤ë”(ë©”ì¸ ì¹´í”¼) ===== */
.hero {
  position: relative;
  z-index: 3;
  text-align: center;
  padding: 160px 20px 40px;
}
.hero h1 {
  font-size: 2.4rem;
  margin: 4px 0 6px;
  letter-spacing: 0.2px;
}
.subtitle {
  color: #ffe8a8;
  opacity: 0.95;
}

/* ===== ì„¹ì…˜ ì¹´ë“œ ===== */
main { position: relative; z-index: 3; }
section {
  max-width: 860px;
  margin: 28px auto;
  padding: 24px 20px;
  border-radius: 14px;
  background: rgba(255, 255, 255, 0.06);
  backdrop-filter: blur(6px);
  border: 1px solid rgba(255, 255, 255, 0.08);
}
section h2 {
  font-size: 1.4rem;
  margin-bottom: 12px;
  color: #ffe7a1;
  border-bottom: 2px solid rgba(255, 231, 161, 0.35);
  padding-bottom: 6px;
}
section ul { list-style: none; padding-left: 0; }
section li { margin: 10px 0; line-height: 1.7; }

/* ===== ë°©ëª…ë¡ ===== */
.guestbook .form {
  display: flex;
  gap: 10px;
  margin: 14px 0 16px;
}
.guestbook input {
  flex: 1;
  padding: 11px 12px;
  border-radius: 10px;
  border: 1px solid rgba(255, 255, 255, 0.14);
  background: rgba(255, 255, 255, 0.08);
  color: #fff;
  outline: none;
}
.guestbook input::placeholder { color: rgba(255, 255, 255, 0.7); }
.guestbook button {
  padding: 11px 16px;
  border: none;
  border-radius: 10px;
  background: linear-gradient(135deg, #f2d37a, #ffd98f);
  color: #2a1f42;
  font-weight: 700;
  cursor: pointer;
  transition: transform 0.15s ease, filter 0.15s ease;
}
.guestbook button:hover { transform: translateY(-1px); filter: brightness(1.05); }
.guestbook .list {
  margin-top: 10px;
  display: grid;
  gap: 8px;
}
.guestbook .list li {
  padding: 10px 12px;
  background: rgba(255, 255, 255, 0.06);
  border: 1px solid rgba(255, 255, 255, 0.08);
  border-radius: 10px;
  line-height: 1.6;
}

/* ===== í‘¸í„° ===== */
.footer {
  position: relative;
  z-index: 3;
  text-align: center;
  margin: 36px 0 12px;
  color: #e6e2f0;
  opacity: 0.9;
  font-size: 0.92rem;
}
</style>
